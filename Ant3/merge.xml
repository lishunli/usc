<?xml version="1.0" encoding="UTF-8"?>
<project name="merge" default="runtest">

	<!-- touch任务创建两个新的临时文件，而且经过sleep的时间段 -->
	<target name="init">
		<touch file="old.txt" />
		<sleep seconds="2" />
		<touch file="new.txt" />
	</target>
	
	<target name="check.new.newer">
		<uptodate targetfile="new.txt" srcfile="old.txt" property="new.newer" />
	</target>
	
	<target name="check.old.newer">
		<uptodate targetfile="old.txt" srcfile="new.txt" property="old.newer" />
	</target>
	
	<target name="is.old.newer" if="old.newer">
		<echo message="old.txt is newer than new.txt"/>
	</target>
	
	<target name="is.new.newer" if="new.newer">
		<echo message="new.txt is newer than old.txt"/>
	</target>
	
	<target name="runtest" 
			depends="init,check.old.newer,check.new.newer,is.old.newer,is.new.newer">
		<echo message="done"/>
	</target>
	
	
	<target name ="merge2">
		<uptodate  property="new.newer" targetfile="new.txt" srcfile="old.txt">
		</uptodate>
	</target>
	
	
	<target name ="merge3">
		<uptodate  property="new.newer"  srcfile="old.txt">
			<mapper type="merge" to="new.txt"/>
		</uptodate>
	</target>
	
	<target name="echo" depends="merge3">
		<echo>${new.newer}</echo>
	</target>
	
</project>